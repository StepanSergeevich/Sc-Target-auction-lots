{% extends 'authentication/base.html' %}

{% block header %}


{% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'authentication/css/authentication.css' %}">

{% endblock %}

{% block body %} 

<h2 id="site_tag" contenteditable spellcheck="false">Stalcraft: [MMM Edition] Target Lots Auction</h1>
<div class="container" id="container">
    <div class="form-container sign-up-container">

        <form method="POST" action="{% url 'authentication' %}">
            {% csrf_token %}
            <h1 style="margin-bottom: 20px;">Регистрация</h1>
            {{ form.username.label_tag }} {{ form.username }}  <!-- Поле для имени пользователя -->
            {{ form.email.label_tag }} {{ form.email }}      <!-- Поле для email -->
            {{ form.password1.label_tag }} {{ form.password1 }}  <!-- Поле для пароля -->
            {{ form.password2.label_tag }} {{ form.password2 }}  <!-- Поле для подтверждения пароля -->
            {% for message in messages %}
                {% if 'except_error' in message.tags %}
                    <span>{{ message }}</span>
                {% endif %}
            {% endfor %}
            <button type="submit" style="margin-top: 25px;" name="register">Зарегистрироваться</button>
        </form>

    </div>
    <div class="form-container sign-in-container">

        <form method="POST" action="{% url 'authentication' %}">
            {% csrf_token %}
            <h1 style="margin-bottom: 20px;">Вход</h1>
            {{ login_form.username.label_tag }} {{ login_form.username }}  <!-- Поле для имени пользователя -->
            {{ login_form.password.label_tag }} {{ login_form.password }}  <!-- Поле для пароля -->
            <div class="messages">
            {% for message in messages %}
                {% if 'sign_in' in message.tags %}
                    <span>{{ message }}</span>
                {% endif %}
            {% endfor %}
            </div>
            <button type="submit" style="margin-top: 0px;" name="login">Войти</button>
            <a href="http://127.0.0.1:8000/auth/password_reset" style="color:rgb(23, 0, 151); font-size: 15px;  margin-top: 119px; background-color: rgb(0, 174, 255); color: white; padding: 15px; border-radius: 25px;">Восстановление пароля</a>
        </form>

    </div>
    <div class="overlay-container">
        <div class="overlay">
            <div class="overlay-panel overlay-left">
                <h1>Привет, дружище</h1>
                <p>Уже есть аккаунт? Залогинься!</p>
                <button class="ghost" id="signIn">Войти в аккаунт</button>
            </div>
            <div class="overlay-panel overlay-right">
                <h1>Привет, дружище</h1>
                <p>Нет аккаунта? Зарегистрируйся!</p>
                <button class="ghost" id="signUp">зарегистрироваться</button>
                <div class="wrong_register">       

                    {% for message in messages %}
                        {% if 'wrong_register' in message.tags %}
                            <p>{{ message }}</p>
                        {% endif %}
                    {% endfor %}

                </div>
            </div>
        </div>
    </div>
</div>

<script type='text/javascript'>
    const signUpButton = document.getElementById('signUp');
    const signInButton = document.getElementById('signIn');
    const container = document.getElementById('container');
    
    signUpButton.addEventListener('click', () => {
        container.classList.add("right-panel-active");
    });
    
    signInButton.addEventListener('click', () => {
        container.classList.remove("right-panel-active");
    });
</script>

{% endblock %}

